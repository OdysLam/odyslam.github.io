<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>In webiopi we trust &#8211; Project L</title>
<meta name="description" content="GLaDOS main library">
<meta name="keywords" content="webiopi, GLaDOS, python, guide">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://odyslam.github.io/images/">
<meta name="twitter:title" content="In webiopi we trust">
<meta name="twitter:description" content="GLaDOS main library">
<meta name="twitter:creator" content="@CynicOdys">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="In webiopi we trust">
<meta property="og:description" content="GLaDOS main library">
<meta property="og:url" content="http://odyslam.github.io/webiopi-post/">
<meta property="og:site_name" content="Project L">





<link rel="canonical" href="http://odyslam.github.io/webiopi-post/">
<link href="http://odyslam.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Project L Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://odyslam.github.io/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://odyslam.github.io/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<!-- 32x32 -->
<link rel="shortcut icon" href="http://odyslam.github.io/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<!--<link rel="apple-touch-icon-precomposed" href="http://odyslam.github.io/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini 
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://odyslam.github.io/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch 
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://odyslam.github.io/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation 
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://odyslam.github.io/images/apple-touch-icon-144x144-precomposed.png">-->




<style type="text/css">body {background-image:url(http://odyslam.github.io/images/home3.jpg);}</style>


</head>

<body id="post" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://odyslam.github.io/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://odyslam.github.io/images/avatar.png" alt="Odysseas Lamtzidis photo" class="author-photo">
					<h4>Odysseas Lamtzidis</h4>
					<p>Ece student currently studying in Patras. Interested in IoT and electronics.
In love with marketing and entrepreneurship</p>
				</li>
				<li><a href="http://odyslam.github.io/about/"><span class="btn btn-inverse">Learn More</span></a></li>
				<li>
					<a href="mailto:odyslam@gmail.com"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="https://twitter.com/CynicOdys"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				<li>
					<a href="https://facebook.com/odysseas007"><i class="fa fa-fw fa-facebook"></i> Facebook</a>
				</li>
				
				<li>
					<a href="https://linkedin.com/in/lamtzidisodysseas"><i class="fa fa-fw fa-linkedin"></i> LinkedIn</a>
				</li>
				
				
				<li>
					<a href="https://instagram.com/odys_lam"><i class="fa fa-fw fa-instagram"></i> Instagram</a>
				</li>
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="http://odyslam.github.io/posts/">All Posts</a></li>
				<li><a href="http://odyslam.github.io/tags/">All Tags</a></li>
			</ul>
		</li>
		
	    
	    <li><a href="http://odyslam.github.io/introduction/" >Introduction</a></li>
	  
	    
	    <li><a href="http://odyslam.github.io/raspberry/" >Raspberry IoT</a></li>
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->




<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title" ><a href="http://odyslam.github.io/webiopi-post/" rel="bookmark" title="In webiopi we trust">In webiopi we trust</a></h1>
        
        <h2><span class="entry-date date published"><time datetime="2016-03-26T00:00:00+02:00">March 26, 2016</time></span></h2>
        
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <h2 id="glados-framework">GLaDOS Framework</h2>

<p>Ok, you have your Raspberry up and running as it’s sits quietly somewhere in the house. Now let’s examine the software framework of GLaDOS.</p>

<p>The main library-framework we are going to use is called <a href="http://webiopi.trouch.com/">Webiopi</a> and it’s a wonderful, yet quite hard and suprisingly undocumented, tool.</p>

<p class="notice"><em>From the site:</em>
WebIOPi includes an HTTP server that provides both HTML resources and a REST API to control things. Your browser will first load a HTML file, then the included Javascript will make Asynchronous calls to the REST API to control and update the UI. This method is very efficient, because it don’t need to refresh and download the whole page.</p>

<h3 id="that-doesnt-seem-that-simple">That doesn’t seem that simple</h3>

<p>Well, actually it’s not <em>that</em> hard if you have some basic knowledge on how websites and servers work. The most straight-forward approach is the following:</p>

<ul>
  <li>
    <p>Script file that is run by the python server and handles all Raspberry pi’s actions.</p>
  </li>
  <li>
    <p>Website that uses Javascript to call functions that are defined and run by the python script file. It means that all you have to do with js is to call the appropriate function in the script.
<em>using python as much as possible makes the project much easier.</em></p>
  </li>
  <li>
    <p>Weaved IoT suite(3rd party program intergrated into webiopi) to be able to access the Rpi server(where the site is hosted) outside of the lan (without port-forwarding ,etc).</p>
  </li>
</ul>

<p><img src="http://trouch.com/wp-content/uploads/2014/01/webiopi-rest.png" alt="overview" /></p>

<p>As you can see from the image, you can control the gpios using directly Javascript functions. It’s both impractical and hard for beginners. We are going to exclusively python functions that will be called from Javascript(i.e pressing a button,executes python function “A”).</p>

<p><strong>Important</strong>: It works both on Rpi 1 and 2,  it just needs an update-fix and it works like a charm(going into detail later).</p>

<h2 id="installation">Installation:</h2>

<p>Firstly, let’s <code class="highlighter-rouge">ssh</code>to our Raspberry pi.</p>

<ol>
  <li>
    <p>open Terminal/Command line and type <code class="highlighter-rouge">ssh pi@Rpi-Ip</code>, where Rpi-Ip is the ip of your Raspberry pi,after it prompts for password, type it and hit enter.</p>
  </li>
  <li>
    <p>Go <a href="http://webiopi.trouch.com/DOWNLOADS.html">here</a> and download the latest version of webiopi to your computer.</p>
  </li>
  <li>
    <p>With filezilla put the file in the default directory of Rpi as shown bellow:
<img src="http://i.imgur.com/ERiSEun.png" alt="filezilla" /></p>
  </li>
  <li>
    <p>Run these commands, where x.y.z is the version of WebIOPI you downloaded.</p>
  </li>
</ol>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>tar xvzf WebIOPi-x.y.z.tar.gz
<span class="gp">$ </span><span class="nb">cd </span>WebIOPi-x.y.z
<span class="gp">$ </span>sudo ./setup.sh</code></pre></figure>

<p>5.????(profit)</p>

<p>6.Congratulations, you just installed Webiopi successfully, now let’s change the password(better get rid of it) with this <a href="http://webiopi.trouch.com/PASSWORD.html">guide</a></p>

<p>7.Don’t do anything just yet, just open this <a href="http://webiopi.trouch.com/INSTALL.html">page</a> and keep it open for future reference to run the appropriate commands.</p>

<p>8.If you own a Raspberry pi 2, please visit this <a href="https://github.com/doublebind/raspi">github page</a> and follow the instrutions to patch your webiopi. Don’t try to test webiopi examples/ready pages as they might not work.We are going to avoid using webiopi’s JS library as much as possible. 
In reality we are going to use only this command <code class="highlighter-rouge">webiopi.callmacro()</code> which calls a function from the python script.</p>

<p>If you own a Raspberry pi 3, this guide might work, might not. Webiopi is a bit old,undocumented and I am a beginner.
If it doesn’t, try this <a href="https://groups.google.com/forum/#!forum/webiopi">forum</a> to find answers.</p>

<h2 id="lets-get-into-the-basics">Let’s get into the basics.</h2>

<p>As you can see from this <a href="http://webiopi.trouch.com/Tutorial_Basis.html">tutorial</a>, the webiopi uses a certain skeleton structure:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>home
- pi
  - myproject
    - python
    - html
</code></pre>
</div>

<p class="notice"><em>Important:</em>
In this simple example, there are only a couple of lines of css/javascript so it’s easy to put them in the <code class="highlighter-rouge">.html</code> file. It’s heavily advised that you create different folders and store each script in it’s own file. It’s a <em>VERY</em> good programming practice(some would say necessary).</p>

<p>There is a specific folder for your main python script and your <code class="highlighter-rouge">index.html</code> file, aka the mainpage.</p>

<p>Now, try to test the tutorial, it’s a very good first test to see how this particular library works.I am not going to explain all the code in detail, just some parts that I believe are important and/or hard to understand.</p>

<h3 id="that-setup-loop-destroy-thingy-looks-familliar">That setup-loop-destroy thingy looks familliar?</h3>

<p>Yeah! Webiopi uses the same 3 function core as <em>arduino</em> to facilitate us. We are definately going to use the setup function. Loop is kinda optional since I prefer to create my own loops whenever that’s necessary, so as to keep the stress to the cpu as low as possible.(we need this project to be stable <em>af</em>)</p>

<h3 id="that-javascript-code-seems-strange">That Javascript code seems strange</h3>

<p>That because it is, it’s an old javascript library inside the webiopi which can be used to create very simple, but extremely ugly, buttons and slides that by default can control various gpios. It’s of no use as we going to control the gpio through python functions that are going to be called from the javascript, that way we can use whatever element we want, it’s customisable 100%.</p>

<h3 id="webiopisleep">Webiopi.sleep?</h3>

<p>Well, that’s a way to slow-down loops. I prefer using the <code class="highlighter-rouge">threading.timer</code> which is part of the <code class="highlighter-rouge">threading</code> library. This way while you wait for the timer , the script can still execute commands in contrast with the <code class="highlighter-rouge">webiopi.sleep</code> function that totally freezes our script for the specified time.</p>

<p>Now that we understand the structure of webiopi, it’s time to dwelve deeper into the code. We are going to take  a look at the python script in the next post.</p>

<p>Remember that if you want to follow this project from the first post, go to the posts tab and click All Posts.</p>

<p>Until then, cheers!</p>


      <footer class="entry-meta">
        <span class="entry-tags"><a href="http://odyslam.github.io/tags/#webiopi" title="Pages tagged webiopi" class="tag"><span class="term">webiopi</span></a><a href="http://odyslam.github.io/tags/#GLaDOS" title="Pages tagged GLaDOS" class="tag"><span class="term">GLaDOS</span></a><a href="http://odyslam.github.io/tags/#python" title="Pages tagged python" class="tag"><span class="term">python</span></a><a href="http://odyslam.github.io/tags/#guide" title="Pages tagged guide" class="tag"><span class="term">guide</span></a></span>
        <span>Updated on <span class="entry-date date updated"><time datetime="2016-04-25">April 25, 2016</time></span></span>
        <span class="author vcard"><span class="fn">Odysseas Lamtzidis</span></span>
        <div class="social-share">
  <ul class="socialcount socialcount-small inline-list">
    <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=http://odyslam.github.io/webiopi-post/" title="Share on Facebook"><span class="count"><i class="fa fa-facebook-square"></i> Like</span></a></li>
    <li class="twitter"><a href="https://twitter.com/intent/tweet?text=http://odyslam.github.io/webiopi-post/" title="Share on Twitter"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a></li>
    <li class="googleplus"><a href="https://plus.google.com/share?url=http://odyslam.github.io/webiopi-post/" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a></li>
  </ul>
</div><!-- /.social-share -->
      </footer>
    </div><!-- /.entry-content -->
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
    <div class="read-more">
  
    <div class="read-more-header">
      <a href="http://odyslam.github.io/languages-post/" class="read-more-btn">Read More</a>
    </div><!-- /.read-more-header -->
    <div class="read-more-content">
      <h3><a href="http://odyslam.github.io/python-post/" title="Let's get into (Monty) Python">Let's get into (Monty) Python</a></h3>
      <p>script.py : an introduction <a href="http://odyslam.github.io/python-post/">Continue reading</a></p>
    </div><!-- /.read-more-content -->
  
  <div class="read-more-list">
    
      <div class="list-item">
        <h4><a href="http://odyslam.github.io/languages-post/" title="Are you talking to me?">Are you talking to me?</a></h4>
        <span>Published on March 25, 2016</span>
      </div><!-- /.list-item -->
    
      <div class="list-item">
        <h4><a href="http://odyslam.github.io/GlaDOS-post/" title="GlaDOS">GlaDOS</a></h4>
        <span>Published on March 24, 2016</span>
      </div><!-- /.list-item -->
    
  </div><!-- /.read-more-list -->
</div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2016 Odysseas Lamtzidis. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the HPSTR Theme and cared by GLaDOS</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://odyslam.github.io/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://odyslam.github.io/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-75553304-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>



    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'projectl'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
	        

</body>
</html>
